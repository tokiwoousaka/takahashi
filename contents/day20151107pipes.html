<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
    var SlideList = []
    var SlideIndex = 0;
    var Title = "Slide";

    function init(){
      SlideList = document.getElementsByName("pages");
      changeSlide(0);
    }

    function changeSlide(index){
      if(0 > index || index >= SlideList.length) return;
      for(i = 0; i < SlideList.length ;i++) {
        if(i == index) {
          SlideList[i].style.display = "table-cell";
          document.title = Title + " - " + (i + 1) + "/" + SlideList.length;
        } else {
          SlideList[i].style.display = "none";
        }
      }
      SlideIndex = index;
    }

    document.onkeydown = function(e){
      if(e.keyCode == 39 || e.keyCode == 34) changeSlide(SlideIndex + 1);
      if(e.keyCode == 37 || e.keyCode == 33) changeSlide(SlideIndex - 1);
    }

    // -----

    function judgeMoveSlide(x){
      if(x > (window.innerWidth / 3 * 2)) changeSlide(SlideIndex + 1);
      if(x < (window.innerWidth / 3)) changeSlide(SlideIndex - 1);
    }

    document.ontouchend = function(e){
      judgeMoveSlide(e.changedTouches[0].pageX);
    }

  </script>
  <style>
    html, body {
      height: 98%;
      width: 99%; 
      overflow:hidden;
    }
    h1, h2, h3, ul, p {
      margin:0px; 
      padding:0px;
    }
    .slide {
      font-size:45pt;
      display:inline-table; 
      width:100%; 
      height:100%; 
    }
  </style>
<head>
<body onload="init()" style="height:100%">
  <div class="slide">

<div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><h1>Pipesチュートリアルを<br />読んだ話</h1><p>2015/11/7 関数型ストリーム処理勉強会<br />by ちゅーん(@its_out_of_tune)</p></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>自己紹介</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:66%;float:left"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>野生のHaskller(28♂)</li><li>東京都近郊に生息(休職中)<br /><br /></li><li>クルージング(スケボー)</li><li>ボルダリング<br /><br /></li><li>スプラトゥーン</li><li>当たらない方のリッター使い</li></ul></div></div></div><div class="block" style="height:100%;width:33%;float:left"><div class="block" style="height:50%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/my_icon2.gif" style="width:90%"/></div></div></div><div class="block" style="height:50%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;font-size:40px;color:#000000;background:#c8c8c8;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>HN:　ちゅーん<br /><br />Twitter:<br />　@its_out_of_tune<br />Github:<br />　tokiwoousaka<br /></p></div></div></div></div><div style="clear:both"></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>自己紹介</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>Takahashi Monad：<br />　スライド作成用の言語内DSL<br />　本スライドもこれで作成<br /></li><li>Sarasvati：<br />　永遠に開発中のオーディオインターフェイス<br />　PortAudioのラッパーのラッパー<br /></li><li>ブログ：http://tune.hateblo.jp/<br />　ポーカーゲームを作る連載やってます</li></ul></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>近状</h1></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>宣伝</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>来る11/23</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>宣伝</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>東京流通センター<br />第二展示場</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>宣伝</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>第二十一回<br />文学フリマ東京</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>宣伝</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>暗黒定数式 Vol2<br />寄稿してます</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>宣伝</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>❤(ӦｖӦ｡)よろしく</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>ここ数日間の活動</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;font-size:80px;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>~10/28：暗黒定数式の原稿</li><li>~11/2：原稿見直しとか</li><li>~11/3：イカ</li><li>~11/4：イカ</li><li>~11/5：Pipesを初めてインストール</li><li>~11/6：資料作った</li></ul></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>実は・・・</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>ストリーム処理<br />ライブラリとか<br />今まで使った事無い</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>そんなわけで</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>今日はゆるふわに行きます</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>Pipesとは</h1></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Pipes３つの特徴</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;font-size:80px;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>Effects</li><li>Streaming</li><li>Composability</li></ul></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>(´・ω・｀)？</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>よーわからん</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>超簡単なサンプル</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>echo(三回)</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>import Pipes<br />import qualified Pipes.Prelude as P<br /><br />main :: IO ()<br />main = do<br />  runEffect $ P.stdinLn >-> P.take 3 >-> P.stdoutLn</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>(>->)演算子？</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;font-size:80px;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Haskellなんだから<br />型を見れば良いんちゃう？</p></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>(>->)演算子？</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>GHCiで確認</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>ghci> :t (>->)<br />(>->)<br />  :: Monad m => Proxy a' a () b m r -><br />     Proxy () b c' c m r -> Proxy a' a c' c m r</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>なるほどわからん</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>Pipesの型</h1></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Pipesの４つの型</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>基本的には全部、Proxyを元にtype宣言<br />Proxyの詳細は後述</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>type Effect        m r = Proxy X  () () X m r<br />type Producer   b  m r = Proxy X  () () b m r<br />type Consumer a    m r = Proxy () a  () X m r<br />type Pipe     a b  m r = Proxy () a  () b m r</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>(>->)の型を読み替え</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Producer >-> Pipes >-> Consumer のように繋ぐ<br />各型引数の役割について推測してみよう</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>infixl 7 >-><br />(>->) :: Producer b m r -> Consumer b   m r -> Effect       m r<br />(>->) :: Producer b m r -> Pipe     b c m r -> Producer   c m r<br />(>->) :: Pipe   a b m r -> Consumer b   m r -> Consumer a   m r<br />(>->) :: pipe   a b m r -> pipe     b c m r -> Pipe     a c m r<br /><br />-- ※画面に収まらない都合上Monad制約は省略してます</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>runEffect関数</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>ProducerからConsumerまで繋げば、Effect型になるので<br />runEffect関数でアクションを実行する事ができる。</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>ghci> :t runEffect<br />runEffect :: Monad m => Effect m r -> m r</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>別にIOアクションじゃなくても良い</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Pipes.Preludeの３関数</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>最初のサンプルに出てきた奴(実際にはちょっと違うケド)</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>P.stdinLn  :: MonadIO m => Producer String m ()<br />P.stdoutLn :: MonadIO m => Consumer String m ()<br />P.take     :: Monad m   => Int -> Pipe a a m ()</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>超簡単なサンプル再掲</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>EffectになっているのでrunEffect出来る</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>main :: IO ()<br />main = do<br />  runEffect $ P.stdinLn >-> P.take 3 >-> P.stdoutLn<br />                  ^            ^              ^<br />                  |            |              |<br />              Producer       Pipes        Consumer<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>Proxyをひも解く</h1></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Proxyの構造</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Tutorialの次の図がわかりやすい</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p> Proxy a' a b' b m r<br /><br /> Upstream | Downstream<br />     +---------+<br /> a' <==       <== b'  -- Information flowing upstream<br />     |         |<br /> a  ==>       ==> b   -- Information flowing downstream<br />     +----|----+<br />          v<br />          r</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Producerの構造</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>upstream側が閉じている。<br />尚、X = Void</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>type Producer b = Proxy X () () b<br /><br /> Upstream | Downstream<br />     +---------+<br /> X  <==       <== ()  -- 無視<br />     |         |<br /> () ==>       ==> b<br />     +----|----+<br />          v<br />          r<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Effectの構造</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>downstream側が閉じている。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>type Consumer a = Proxy () a () X<br /><br />Upstream | Downstream<br />    +---------+<br />() <==       <== ()  -- 無視<br />    |         |<br />a  ==>       ==> X<br />    +----|----+<br />         v<br />         r<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Pipesの構造</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>up/downstream双方向とも開いている</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>type Pipe a b = Proxy () a () b<br /><br />Upstream | Downstream<br />    +---------+<br />() <==       <== ()  -- 無視<br />    |         |<br />a  ==>       ==> b<br />    +----|----+<br />         v<br />         r<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Effectの構造</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>ProducerからConsumerへの流れが完成している。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>type Effect = Proxy X () () X<br /><br /> Upstream | Downstream<br />    +---------+<br />X  <==       <== () -- やっぱ無視<br />    |         |<br />() ==>       ==> X<br />    +----|----+<br />         v<br />         r<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>がっちゃんこ</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>(>->)演算子で繋ぐとこんな感じ</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>       Producer                Pipe                 Consumer<br />    +-----------+          +----------+          +------------+<br />    |           |          |          |          |            |<br />X  <==         <==   ()   <==        <==   ()   <==          <== ()<br />    |  stdinLn  |          |  take 3  |          |  stdoutLn  |<br />() ==>         ==> String ==>        ==> String ==>          ==> X<br />    |     |     |          |    |     |          |      |     |<br />    +-----|-----+          +----|-----+          +------|-----+<br />          v                     v                       v<br />          ()                    ()                      ()</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>がっちゃんこ</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>結果、こうなる</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>                   Effect<br />    +-----------------------------------+<br />    |                                   |<br />X  <==                                 <== () -- 無視じゃ<br />    |  stdinLn >-> take 3 >-> stdoutLn  |<br />() ==>                                 ==> X<br />    |                                   |<br />    +----------------|------------------+<br />                     v<br />                     ()<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>内部実装的な話</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>モノとしては単なるモナドっぽい。<br />中身の掘り下げは時間が足りなくて出来なかった。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>data Proxy a' a b' b m r<br />    = Request a' (a  -> Proxy a' a b' b m r )<br />    | Respond b  (b' -> Proxy a' a b' b m r )<br />    | M          (m    (Proxy a' a b' b m r))<br />    | Pure    r<br /><br />instance Monad m => Monad (Proxy a' a b' b m) where</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>こまごまとした話</h1></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>(>~)演算子</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>わりと基本っぽい。Proxyの返却値 r を、<br />次の処理に繋ぐ演算子なのだが、十分にいじれなかった。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>(>~) :: Effect       m b -> Consumer b   m c -> Effect       m c<br />(>~) :: Consumer a   m b -> Consumer b   m c -> Consumer a   m c<br />(>~) :: Producer   y m b -> Pipe     b y m c -> Producer   y m c<br />(>~) :: Pipe     a y m b -> Pipe     b y m c -> Pipe     a y m c</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>(>~)演算子</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>こんな感じの図になるらしい。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>   +-------+               +-------+           +----------+<br />   |       |               |       |           |          |<br />a ==>  f  ==> y   .->   b ==>  g  ==> y  =  a ==> f >~ g ==> y<br />   |   |   |    /          |   |   |           |    |     |<br />   +---|---+   /           +---|---+           +----|-----+<br />       v      /                v                    v<br />       b  ---'                 c                    c</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>こんな型あるよ１</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>upstreamからupstream、あるいは<br />downstreamからdownstreamの流れ。用途は良くわかっていない</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p> type Server        b' b = Proxy X  () b' b<br /> type Client   a' a      = Proxy a' a  () X</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>こんな型あるよ２</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>各型の多相版、やっぱり用途は良くわからない。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>type Effect'            m r = ∀x' x y' y . Proxy x' x y' y m r<br />type Producer'        b m r = ∀x' x      . Proxy x' x () b m r<br />type Consumer'   a      m r = ∀     y' y . Proxy () a y' y m r<br /><br />type Server'       b' b m r = ∀x' x      . Proxy x' x b' b m r<br />type Client'  a' a      m r = ∀     y' y . Proxy a' a y' y m r<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>yield関数とawait関数</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>ProducerやConsumerを作るのに使う基礎的な関数<br />Tutorialはまず、この説明から入ってるけど、どうなんだ。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:40px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>yield :: Monad m => a -> Producer a m ()<br />await :: Monad m => Consumer a m a<br /></p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>まとめ</h1></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>まとめ</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;font-size:80px;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>結局ストリーム処理良くわからない</li><li>でもPipesの使い方はそんな難しく無さそう</li><li>みた感じ綺麗な構造がチラホラ</li><li>使えるようになったら便利っぽい気はする</li><li>もうちょっと頑張る</li></ul></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>ありがとうございました<br />m(__)m</h1></div></div></div>

  </div>
</body>
</html>
