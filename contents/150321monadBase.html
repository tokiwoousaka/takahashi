<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
    var SlideList = []
    var SlideIndex = 0;
    var Title = "Slide";

    function init(){
      SlideList = document.getElementsByName("pages");
      changeSlide(0);
    }

    function changeSlide(index){
      if(0 > index || index >= SlideList.length) return;
      for(i = 0; i < SlideList.length ;i++) {
        if(i == index) {
          SlideList[i].style.display = "table-cell";
          document.title = Title + " - " + (i + 1) + "/" + SlideList.length;
        } else {
          SlideList[i].style.display = "none";
        }
      }
      SlideIndex = index;
    }

    document.onkeydown = function(e){
      if(e.keyCode == 39) changeSlide(SlideIndex - 1);
      if(e.keyCode == 37) changeSlide(SlideIndex + 1);
    }

    // -----

    function judgeMoveSlide(x){
      if(x > (window.innerWidth / 3 * 2)) changeSlide(SlideIndex + 1);
      if(x < (window.innerWidth / 3)) changeSlide(SlideIndex - 1);
    }

    document.ontouchend = function(e){
      judgeMoveSlide(e.changedTouches[0].pageX);
    }

  </script>
  <style>
    html, body {
      height: 98%;
      width: 99%; 
      overflow:hidden;
    }
    h1, h2, h3, ul, p {
      margin:0px; 
      padding:0px;
    }
    .slide {
      font-size:45pt;
      display:inline-table; 
      width:100%; 
      height:100%; 
    }
  </style>
<head>
<body onload="init()" style="height:100%">
  <div class="slide">

<div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><h1>Yonedaについて</h1><p>2015/3/24 モナド基礎勉強会<br />by ちゅーん(@its_out_of_tune)</p></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>自己紹介</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>自己紹介</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:66%;float:left"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>野生のHaskller(27♂)</li><li>東京都近郊に生息・現NEET<br />　 </li><li>クルージング(スケボー)</li><li>SOUND VOLTEX(音ゲー)</li><li>リトルノア（スマフォゲー）<br />　</li><li>ゆずこ（ゆゆ式）可愛い</li><li>ヲ級ちゃん可愛い</li><li>艦これやってない</li></ul></div></div></div><div class="block" style="height:100%;width:33%;float:left"><div class="block" style="height:50%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/my_icon2.gif" style="width:90%"/></div></div></div><div class="block" style="height:50%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;font-size:40px;color:#000000;background:#c8c8c8;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>HN:　ちゅーん<br /><br />Twitter:<br />　@its_out_of_tune<br />Github:<br />　tokiwoousaka<br /></p></div></div></div></div><div style="clear:both"></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>自己紹介</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>Takahashi Monad：<br />　スライド作成用のHaskell言語内DSL<br />　このスライドもこれで作成しました</li><li>Sarasvati：<br />　オーディオインターフェイス<br />　PortAudioのラッパーのラッパーとして開発中<br /></li></ul></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>はじめに</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>焼き肉が食べたい</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/png001_yonedasc1.png" style="height:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/png002_yonedasc2.png" style="height:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/png003_yonedasc3.png" style="height:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>というわけで</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>本日のテーマ<br />Yoneda</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:30px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>どうしてこうなった</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>はじめに</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>なお、そのような事情により、<br />本日はモナドの基礎の話はできませんが、<br />まぁ、某ボドゲ大会で、ある方が<br /><br />「米田の補題は基礎だから」<br /><br />って言っていたので、基礎繋がりで、<br />良いんじゃないかと思います。</p></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>米田の補題</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:91%;width:100%"><div class="block" style="height:100%;width:66%;float:left;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>米田信夫(1930-1996)</li><li>日本の数学者／計算機科学者</li><li>1961年　東京大学　理学博士</li><li>ALGOLに関する功績</li><li>圏論における米田の補題<br />　</li><li>ソースはWikipedia☆（ゝω・）v</li></ul></div></div></div><div class="block" style="height:100%;width:33%;float:left;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/gif001.gif" style="width:90%"/></div></div></div><div style="clear:both;display:table"></div></div><div class="block" style="height:8%;width:100%;display:table;color:#ff0000;border-width:10;border-color:#ffffff;box-sizing:border-box"><p>※肖像画は檜山正幸さんのブログよりお借りしました</p></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>以下の全単射の存在を示す定理<br />米田関手（後述）と呼ばれる関手が充満忠実である事を証明する</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m01.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>マックレーン「圏論の基礎」による証明<br />「以下の可換図式によって示される」</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m02.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>なるほどわからん</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>米田の補題の証明には、以下の前提が必要</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m03.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m04.jpg" style="width:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>αは自然変換なので<br />「圏論の基礎」で示されていた以下の図式は可換</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m13.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>左辺に1rを作用</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m05.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>右辺に1rを作用</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m06.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>αd(f)=Kf(αr1r)は∀f:r->dで成り立つ<br />よってαr1rが定まればαが定まる </p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m07.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>逆に、αが定まればαr1rも定まる<br /><br />得られたαrに1rを作用させれば良いだけなので自明</p></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>αとαr1rは、米田の補題の左辺と右辺<br />ここまでの説明は片方の集合から<br />もう片方が完全に定まる事を示していた</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m09.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m08.jpg" style="width:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>よって、以下の集合間に全単射が存在する事が証明される</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m01.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>この補題は、以下のように定義された<br />米田関手が充満忠実である事を証明する</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m10.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m12.jpg" style="width:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m11.jpg" style="width:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>米田関手の双対として、<br />米田埋め込みという充満忠実な関手がある。<br />これは任意の圏をSetに移せるため有用・・・だそうだ。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m24.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>HaskellとYoneda</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>HaskellとYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:50%;float:left;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>米田の補題の全単射の左辺を<br />Haskellのコードに落としこむ</p></div></div></div><div class="block" style="height:100%;width:50%;float:left;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m14.jpg" style="width:90%"/></div></div></div><div style="clear:both;display:table"></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>newtype Yoneda f x <br />  = Yoneda { runYoneda :: forall b. (x -> b) -> f b }</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>HaskellとYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Yoneda型は以下のようにしてFunctorにすることで、<br />米田の補題により、任意のFunctor f と同値になる。</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>instance Functor (Yoneda f) where<br />  fmap f (Yoneda m) = Yoneda $ \k -> m (k . f)</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>たとえば、Yoneda Maybe a は<br />Functorとして完全に Maybe a 型に代用する事が出来る。</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>HaskellとYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Yoneda型が任意のFunctorの代用になる事を確認するため、<br />簡単な関数を定義しておこう。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>lowerYoneda :: Yoneda f a -> f a<br />lowerYoneda (Yoneda m) = m id<br /><br />liftYoneda :: Functor f => f a -> Yoneda f a<br />liftYoneda v = Yoneda $ \k -> fmap k v</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>HaskellとYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>その上で、以下のコードを実行する事で<br />Yoneda型を仲介しても結果は変わらない事が確認できる。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>ndigits :: Functor f => f Int -> f Int<br />ndigits = fmap length . fmap show<br /><br />main :: IO ()<br />main = do<br />  -- Just 114514<br />  print . ndigits $ Just 114514<br />  print . lowerYoneda . ndigits . liftYoneda $ Just 114514<br />  -- Nothing<br />  print . ndigits $ Nothing<br />  print . lowerYoneda . ndigits . liftYoneda $ Nothing</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>HaskellとYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Yoneda型を構成する際にmapの計算を組み込めれば、<br />元になる型がFunctorのインスタンスになっている必要はない。<br />関手が存在するかどうかは、型そのものの性質だからである。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>data MyMaybe a = MyJust a | MyNothing<br />  deriving (Show, Read, Eq, Ord)<br /><br />yonedaMM :: MyMaybe a -> Yoneda MyMaybe a<br />yonedaMM (MyJust x) = Yoneda $ \k -> MyJust (k x)<br />yonedaMM MyNothing = Yoneda $ \_ -> MyNothing<br /><br />main :: IO ()<br />main = do<br />  print . lowerYoneda . fmap (*2) . yonedaMM $ MyJust 114514<br />  print . lowerYoneda . fmap (*2) . yonedaMM $ MyNothing<br /></p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>HaskellとYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>改めて、Yonedaのfmapの実装を見てみよう。<br />mapした際に行われるのは基本的に関数操作である。</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>instance Functor (Yoneda f) where<br />  fmap f (Yoneda m) = Yoneda $ \k -> m (k . f)</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>データへの直接的な操作はオーバーヘッドになり兼ねない。<br />つまりYonedaは、Functorに対する大きな操作の、<br />パフォーマンス対策ツールになり得る。</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>Yonedaの双対CoYoneda</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Yonedaの双対CoYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>米田の補題の双対として「余米田の補題」があり、<br />余米田の補題は、以下のようにHaskell上で実装される。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>data CoYoneda f x = forall b. CoYoneda (b -> x) (f b)<br /><br />instance Functor (CoYoneda f) where<br />  fmap f (CoYoneda g v) = CoYoneda (f . g) v<br /></p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Yonedaの双対CoYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>CoYonedaは概ね、Yonedaと同等の機能を持つ。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>liftCoYoneda :: f a -> CoYoneda f a<br />liftCoYoneda = CoYoneda id<br /><br />lowerCoYoneda :: Functor f => CoYoneda f a -> f a<br />lowerCoYoneda (CoYoneda f x) = fmap f x<br /><br />main :: IO ()<br />main = do<br />  print . lowerCoYoneda . ndigits . liftCoYoneda $ Just 114514<br />  print . lowerCoYoneda . ndigits . liftCoYoneda $ Nothing<br /></p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Yonedaの双対CoYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>YonedaとCoYonedaの双対性は、<br />lift, lower関数の型定義に明確に現れる。</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>liftYoneda    :: Functor f => f a -> Yoneda   f a<br />liftCoYoneda  ::              f a -> CoYoneda f a<br /><br />lowerYoneda   ::              Yoneda   f a -> f a<br />lowerCoYoneda :: Functor f => CoYoneda f a -> f a</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Yonedaはliftの際にmap操作が決定しなくてはいけない、<br />対して、CoYonedaはlowerで決定する。</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Yonedaの双対CoYoneda</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Yonedaの場合と同様、lowerの際にmapの計算を組み込めれば、<br />その型自体がFunctorのインスタンスである必要はない。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>coyonedaMM :: CoYoneda MyMaybe a -> MyMaybe a<br />coyonedaMM (CoYoneda f (MyJust x)) = MyJust $ f x<br />coyonedaMM (CoYoneda _ _) = MyNothing<br /><br />main :: IO ()<br />main = do<br />  print . coyonedaMM . fmap (*2) . liftCoYoneda $ MyJust 114514<br />  print . coyonedaMM . fmap (*2) . liftCoYoneda $ MyNothing</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>余米田の補題</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>お詫び</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>米田の補題の双対</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>余米田の補題</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>時間的都合と</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>実力不足により</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>理解しきれなかった<br />orz orz orz</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>今日は<br />調べて来た事をそのまんま</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:60px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>垂れ流します<br />(｀･ω･´)ゞ</h1></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>対角自然変換（くさび）とは、<br />以下の割り当てを行う関数の事である。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m15.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m16.jpg" style="width:90%"/></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>エンドとは、あるe:Xと、くさびω:e->Sの組であり、<br />以下の規則を満たし、図式を可換にするもの。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m17.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>また、エンドの対象e自体も述語の汎用でエンドと呼ばれ、<br />積分記号を用いて以下のように記述される。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m18.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>エンドの双対コエンドは、<br />あるd:Xと、くさびζ:d->Sの組であり、<br /></p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m20.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>エンドと同様、d自体もコエンドと呼ばれ、<br />積分記号を用いて以下のように記述される。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m22.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>米田の補題はエンドを用いて、<br />以下のように定義する事も可能で・・・</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m19.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>余米田の補題はコエンドを用いて、<br />以下のように定義される・・・のだそうだ。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><img src="../img/04Yoneda/m23.jpg" style="width:90%"/></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>余米田の補題</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;font-size:30px;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>誰か詳しく教えて下さい<br />(´・ω・`)</h1></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>Freeモナド</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Freeモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Freeと呼ばれる型は以下のように定義され、<br />FunctorおよびMonadのインスタンスとなる</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>data Free f r = Free (f (Free f r)) | Pure r<br /><br />instance Functor f => Functor (Free f) where<br />  fmap f x = x >>= return . f<br /><br />instance Functor f => Monad (Free f) where<br />  return = Pure<br />  Free x >>= f = Free $ fmap (>>= f) x<br />  Pure x >>= f = f x<br /></p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Freeモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>liftF関数を使い<br />Functorインスタンスのデータコンストラクタを元に、<br />Freeモナドのモナドアクションを生成できる。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>liftF :: Functor f => f r -> Free f r<br />liftF cmd = Free (fmap Pure cmd)<br /><br />-----<br /><br />just :: a -> Free Maybe a<br />just = liftF . Just<br /><br />nothing :: Free Maybe a<br />nothing = liftF Nothing<br /></p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Freeモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>このようにして作成されたFree Maybeモナドは<br />実質的に、Freeモナドと同様に記述する事ができ・・・</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>sample1 :: Free Maybe Int<br />sample1 = do<br />  x <- just 10<br />  y <- just 20<br />  return $ x + y<br /><br />sample2 :: Free Maybe Int<br />sample2 = do<br />  x <- just 10<br />  y <- nothing<br />  return $ x + y</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Freeモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>retract関数を使い、<br />Maybeモナドと同様の結果を得る事が出来る。</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>main :: IO ()<br />main = do<br />  print . retract $ sample1 -- Just 30<br />  print . retract $ sample2 -- Nothing<br /></p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>このように、Freeモナドは任意のモナドの代用となる。</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Freeモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>liftF関数は任意のFunctorを元に、<br />Freeのモナドアクションを生成する。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>data MyMaybe a = MyJust a | MyNothing<br />  deriving (Show, Read, Eq, Ord, Functor)<br /><br />just :: a -> Free MyMaybe a<br />just = liftF . MyJust<br /><br />nothing :: Free MyMaybe a<br />nothing = liftF MyNothing<br /></p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Freeモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Freeから内包した型を引き剥がす関数を定義できれば、<br />その型がMonad型クラスのインスタンスである必要はない。</p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>runFreeMaybe :: Free MyMaybe a -> MyMaybe a<br />runFreeMaybe (Free (MyJust x)) = runFreeMaybe x<br />runFreeMaybe (Free _) = MyNothing<br />runFreeMaybe (Pure a) = MyJust a<br /></p></div></div></div><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>これはYonedaがそうであったように、<br />Monadの存在は、ある型の性質に過ぎないからである。</p></div></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>Operationalモナド</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>liftF関数はFunctorインスタンスのデータを元に<br />　Freeモナドのモナドアクションを生成する</li><li>Freeモナドは任意のFunctorをモナドにすると解釈できる<br /></li><li>Free f a からFreeを引き剥がす際に<br />　f a のモナドとしての働きが決定する<br /><br /></li><li>CoYonedaは任意の型を内包して、Functorとして機能する</li><li>CoYonedaは任意のデータ型をFunctorにすると解釈できる</li><li>CoYoneda f a から CoYonedaを引き剥がす際に<br />　f a のFunctorとしての働きが決定する</li></ul></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>FreeとCoYoneda、二つを組み合わせて、<br />任意の型を一気にMonadとして扱えるようにする。<br /><br />これが、Operationalモナドの基本的なアイディアである。</p></div></div></div><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>newtype Program f a <br />  = Program { toFree :: Free (CoYoneda f) a }<br /><br />instance Monad (Program f) where<br />  return = Program . return <br />  x >>= f = Program $ toFree x >>= toFree . f</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>Operationalを利用してDSLを作成する場合、<br />まず最初にGADTsを用いて必要なAPIを羅列する。<br /><br />ここでProgram型と組み合わせたtype宣言をしておくと良い。</p></div></div></div><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>data IntIOBase a where<br />  PutInt :: Int -> IntIOBase ()<br />  GetInt :: IntIOBase Int<br />  PrintInt :: IntIOBase ()<br /><br />type IntIO = Program IntIOBase</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>データコンストラクタをモナドアクションにするには、<br />singleton関数を利用すると良い。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>singleton :: f a -> Program f a<br />singleton = Program . liftF . liftCoYoneda<br /><br />putInt :: Int -> IntIO ()<br />putInt = singleton . PutInt<br /><br />getInt :: IntIO Int<br />getInt = singleton GetInt<br /><br />printInt :: IntIO ()<br />printInt = singleton PrintInt<br /></p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>各アクションが具体的に何を行うか、まだ指定していない。<br /><br />しかし、Program型はモナドなので、この時点でdo記法によって、<br />プログラムを記述する事が可能になっている。</p></div></div></div><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>sample :: IntIO ()<br />sample = do<br />  printInt<br />  putInt 100<br />  printInt<br />  putInt 200<br />  printInt</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>DSLを実行する関数の構築には、interpret関数を用いると良い。<br /><br />第一引数には、<br />DSLを他の具体的なモナドに翻訳する関数を指定する。</p></div></div></div><div class="block" style="height:50%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>interpret :: forall instr m b. Monad m => <br />  (forall a. instr a -> m a) -> Program instr b -> m b<br />interpret g (Program (Free (CoYoneda f x))) <br />  = g x >>= interpret g . Program . f<br />interpret _ (Program (Pure a)) = return a</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:33%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><p>以下は、interpret関数の具体的な使用例である。</p></div></div></div><div class="block" style="height:66%;width:100%"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;vertical-align:middle;display:table-cell;font-size:35px;color:#000000;padding-left:8%;border-width:10;border-style:double;border-color:#000000;box-sizing:border-box;font-family:'Consolas','Liberation Mono','Menlo','Courier',monospace;white-space:pre"><p>runIntIO :: IntIO a -> Int -> IO a<br />runIntIO t i = evalStateT (interpret advent t) i<br />  where<br />    advent :: IntIOBase a -> StateT Int IO a<br />    advent (PutInt x) = put x<br />    advent GetInt  = get<br />    advent PrintInt = get >>= liftIO . print</p></div></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>Operationalモナド</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>モナドを作るのはややこしい<br />　　　　　　　（モナド則、Applicativeとの兼ね合い）<br /><br /></li><li>モナドを言語内DSLを作るためのツールと考える</li><li>概ね　モナドの設計＝APIの策定</li><li>実装部分は切り離せたほうが良い<br /><br /></li><li>Operationalは、APIを書き連ねる所から設計がはじまる</li><li>Operationalなら、API設計と実装部分は完全に切り離す事ができる<br /><br />　→Operationalは言語内DSL開発の有用な選択肢になり得る</li></ul></div></div></div></div><div name="pages" style="font-size:60px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;background:#c8c8c8;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>まとめ</h1></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:18%;width:100%;display:table;color:#ffffff;background:#646464;border-width:10;border-style:solid;border-color:#969696;box-sizing:border-box"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell"><h2>まとめ</h2></div></div></div><div class="block" style="height:81%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;display:table-cell;color:#000000;padding-top:3%;padding-left:8%;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><ul><li>米田の補題。なんか凄い全単射が証明されている</li><li>それをHaskellに落としこんだらYonedaになって便利っぽい</li><li>Yonedaの双対はCoYonedaとかいうらしい</li><li>YonedaもCoYonedaも好きな型をFunctorに出来る。すごい</li><li>FreeモナドはFunctorをモナドに出来る。すごい</li><li>FreeとCoYonedaを組み合わせると楽にモナドが作れて便利<br /><br /></li><li>米田先生すごい！イケメン！→結論</li></ul></div></div></div></div><div name="pages" style="font-size:45px"><div class="block" style="height:100%;width:100%;display:table"><div class="block" style="height:100%;width:100%;text-align:center;vertical-align:middle;display:table-cell;color:#000000;border-width:10;border-style:solid;border-color:#ffffff;box-sizing:border-box"><h1>ありがとうございました<br />m(_ _)m</h1></div></div></div>

  </div>
</body>
</html>
